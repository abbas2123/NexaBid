<div class="max-w-4xl mx-auto px-4 py-10">
  <link
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    rel="stylesheet" />
  <!-- Breadcrumbs -->
  <div class="flex flex-wrap gap-2 text-sm mb-6">
    <a class="text-gray-600 dark:text-gray-400 hover:text-blue-600 transition-colors"
      href="/auth/dashboard">Dashboard</a>
    <span class="text-gray-400">/</span>
    <span class="text-gray-900 dark:text-white font-medium">Account Status</span>
  </div>

  <!-- Back Button + Heading Row -->
  <div class="flex items-center gap-4 mb-8">
    <!-- BACK BUTTON -->
    <a href="/user/profile"
      class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 shadow-sm transition-all">
      <span class="material-symbols-outlined text-2xl leading-none"> arrow_back </span>
    </a>

    <!-- PAGE TITLE -->
    <h1 class="text-3xl font-bold">Account Status</h1>
  </div>
  <!-- ======================= -->
  <!-- VENDOR VERIFICATION -->
  <!-- ======================= -->

  <div class="bg-white shadow rounded-lg p-6 mb-8">
    <h2 class="text-xl font-semibold mb-4">Vendor Verification</h2>

    <% if (!vendorApp) { %>

      <p class="text-gray-600 mb-4">You have not applied for vendor verification.</p>
      <a href="/vendor/apply" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-700">
        Apply Now
      </a>

      <% } else { %>

        <span
          class="px-3 py-1 rounded-full text-white text-sm <%= vendorApp.status === 'approved' ? 'bg-green-600' : vendorApp.status === 'pending' ? 'bg-yellow-500' : vendorApp.status === 'submitted' ? 'bg-blue-600' : 'bg-red-600' %>">
          <%= vendorApp.status.toUpperCase() %>
        </span>

        <div class="mt-4 space-y-2">
          <p>
            <b>Business:</b>
            <%= vendorApp.businessName %>
          </p>
          <p>
            <b>PAN:</b>
            <%= vendorApp.panNumber %>
          </p>
          <p>
            <b>GST:</b>
            <%= vendorApp.gstNumber %>
          </p>
          <p>
            <b>Submitted:</b>
            <%= vendorApp.submittedAt?.toLocaleString() %>
          </p>
        </div>

        <% if (vendorApp.adminNote) { %>

          <div
            class="mt-4 p-4 rounded-lg border <%= vendorApp.status === 'approved' ? 'bg-green-50 border-green-200' : vendorApp.status === 'pending' ? 'bg-yellow-50 border-yellow-200' : vendorApp.status === 'submitted' ? 'bg-blue-50 border-blue-200' : 'bg-red-50 border-red-200' %>">
            <p
              class="font-semibold <%= vendorApp.status === 'approved' ? 'text-green-700' : vendorApp.status === 'pending' ? 'text-yellow-700' : vendorApp.status === 'submitted' ? 'text-blue-700' : 'text-red-700' %>">
              Admin Note:
            </p>

            <p
              class="<%= vendorApp.status === 'approved' ? 'text-green-600' : vendorApp.status === 'pending' ? 'text-yellow-600' : vendorApp.status === 'submitted' ? 'text-blue-600' : 'text-red-600' %>">
              <%= vendorApp.adminNote %>
            </p>
          </div>

          <% } %>
            <% if (vendorApp.status==="rejected" ) { %>
              <a href="/vendor/apply" class="mt-4 inline-block bg-red-600 text-white px-4 py-2 rounded-lg">
                Re-Apply
              </a>
              <% } %>
                <% } %>

                  <!-- VIEW DOCUMENTS -->
                  <% if (vendorApp && vendorApp.documents && vendorApp.documents.length> 0) { %>
                    <p class="font-semibold mt-4">Uploaded Documents:</p>

                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mt-2">
                      <% vendorApp.documents.forEach(doc=> { %> <% if (doc.fileId) { %>
                          <a href="<%= doc.fileId.fileUrl %>" target="_blank"
                            class="bg-gray-100 p-2 text-center rounded block hover:bg-gray-200">
                            <%= doc.type %>
                          </a>

                          <% } else { %>
                            <!-- If fileId is null or deleted -->
                            <div class="bg-red-100 text-red-700 p-2 rounded text-center">Missing File</div>
                            <% } %>
                              <% }) %>
                    </div>
                    <% } %>
  </div>

  <!-- ======================= -->
  <!-- TENDER VERIFICATION -->
  <!-- ======================= -->

  <div class="bg-white shadow rounded-lg p-6 cursor-pointer hover:bg-gray-50 transition mb-6"
    onclick="window.location.href = '/user/manage/tender-status'">
    <div class="flex justify-between items-center">
      <h2 class="text-xl font-semibold">Tender Verification</h2>

      <span class="material-symbols-outlined text-gray-500"> chevron_right </span>
    </div>

    <% if (!tenders || tenders.length===0) { %>
      <p class="text-gray-600 mt-2">No tender requests found.</p>
      <% } else { %>
        <p class="mt-3">You submitted <b>
            <%= tenders.length %>
          </b> tender. Click to view details.</p>
        <% } %>
  </div>

  <!-- ======================= -->
  <!-- PROPERTY VERIFICATION -->
  <!-- ======================= -->

  <div class="bg-white shadow rounded-lg p-6 cursor-pointer hover:bg-gray-50 transition"
    onclick="window.location.href = '/user/manage/propertyStatus'">
    <div class="flex justify-between items-center">
      <h2 class="text-xl font-semibold">Property Verification</h2>

      <span class="material-symbols-outlined text-gray-500"> chevron_right </span>
    </div>

    <% if (!properties || properties.length===0) { %>
      <p class="text-gray-600 mt-2">No property requests found.</p>
      <% } else { %>
        <p class="mt-3">
          You submitted <b>
            <%= properties.length %>
          </b> properties. Click to view details.
        </p>
        <% } %>
  </div>
</div>