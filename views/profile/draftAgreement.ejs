<!-- Breadcrumbs -->
<div class="flex flex-wrap gap-2 text-sm mb-6">
  <a class="text-gray-600 dark:text-gray-400 hover:text-blue-600 transition-colors" href="/user/dashboard">Dashboard</a>
  <span class="text-gray-400">/</span>
  <a class="text-gray-600 dark:text-gray-400 hover:text-blue-600 transition-colors" href="/user/tenders">My
    Tenders</a>
  <span class="text-gray-400">/</span>
  <span class="text-gray-900 dark:text-white font-medium">Agreement</span>
</div>

<h1 class="text-3xl font-black">Upload Agreement Document</h1>
<p class="text-slate-600 dark:text-slate-400">
  Upload the official agreement document for vendor signing.
</p>

<form action="/publisher/tender/<%= tenderId %>/agreement/upload?_csrf=<%= csrfToken %>" method="POST"
  enctype="multipart/form-data">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>">
  <div class="p-4 bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800">
    <div class="flex flex-col items-center gap-6 border-2 border-dashed px-6 py-14 rounded-lg">
      <span class="material-symbols-outlined text-5xl text-slate-400 dark:text-slate-500">
        upload_file
      </span>

      <p class="text-lg font-bold">Upload Agreement PDF</p>

      <input type="file" id="publisherAgreement" name="agreement" accept="application/pdf" class="hidden" />

      <label for="publisherAgreement"
        class="cursor-pointer bg-slate-100 dark:bg-slate-800 px-4 py-2 rounded-lg font-bold">
        Choose PDF File
      </label>

      <p id="fileName" class="text-primary text-sm font-semibold"></p>
    </div>
  </div>

  <button type="button" id="uploadBtn" class="mt-4 bg-primary text-white px-6 py-2 rounded-lg font-bold">
    Upload Agreement
  </button>
</form>

<script>
  document.getElementById('publisherAgreement').addEventListener('change', (e) => {
    document.getElementById('fileName').innerText = 'ðŸ“„ ' + (e.target.files[0]?.name || '');
  });

  document.getElementById('uploadBtn').addEventListener('click', (e) => {
    const fileInput = document.getElementById('publisherAgreement');
    if (!fileInput.files.length) {
      Swal.fire({ icon: 'error', title: 'Validation Error', text: 'Please select a PDF file to upload.' });
      return;
    }
    fileInput.closest('form').submit();
  });

  if (new URLSearchParams(location.search).get('agreement') === 'uploaded') {
    Swal.fire('Agreement Uploaded!', 'Vendor uploaded signed agreement.', 'success');
  }

  if (new URLSearchParams(location.search).get('agreement') === 'publisherUploaded') {
    Swal.fire('Agreement Uploaded!', 'Publisher uploaded agreement document.', 'success');
  }
</script>