<main class="flex flex-1 justify-center py-8 px-4 sm:px-6 lg:px-8">
<div class="layout-content-container flex flex-col w-full max-w-3xl flex-1 gap-6">

    <div class="flex flex-col gap-3">
        <h1 class="text-slate-900 dark:text-slate-50 text-3xl sm:text-4xl font-black">
            Upload Signed Contract Agreement
        </h1>

        <p class="text-slate-600 dark:text-slate-400 text-base">
            Please upload the final signed agreement in PDF format (max 10MB).
        </p>
    </div>
<% if (publisherAgreement) { %>
  <div class="p-4 bg-blue-50 dark:bg-blue-900/30 
              rounded-xl border border-blue-200 dark:border-blue-800">

    <p class="text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2">
      Publisher Uploaded Agreement
    </p>

    <a href="<%= publisherAgreement.fileUrl %>"
       target="_blank"
       class="inline-flex items-center gap-2 bg-blue-600 text-white 
              px-4 py-2 rounded-lg text-sm font-bold hover:bg-blue-700">
      <span class="material-symbols-outlined text-base">download</span>
      Download Agreement PDF
    </a>

  <!-- </div> -->
<% } %>
    <form action="/user/<%= tenderId %>/upload" 
          method="POST" 
          enctype="multipart/form-data">

        <div class="flex flex-col p-4 bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800">

            <div class="flex flex-col items-center gap-6 border-2 border-dashed 
                        border-slate-300 dark:border-slate-700 px-6 py-14 rounded-lg">

                <span class="material-symbols-outlined text-5xl text-slate-400 dark:text-slate-500">
                    upload_file
                </span>

                <p class="text-lg font-bold text-slate-900 dark:text-white">Drag & Drop your PDF here</p>
                <p class="text-sm text-slate-500 dark:text-slate-400">or click below</p>

                <input type="file" 
                       id="agreementFile" 
                       name="signedAgreement"
                       accept="application/pdf"
                       class="hidden" />

                <label for="agreementFile"
                       class="cursor-pointer bg-slate-100 dark:bg-slate-800 px-4 py-2 
                              rounded-lg text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-700">
                    Upload Signed Agreement
                </label>

                <p id="fileName" class="text-primary text-sm font-semibold"></p>
            </div>
        </div>

        <div class="flex items-center gap-4 bg-primary/10 dark:bg-primary/20 p-4 rounded-lg">
            <span class="material-symbols-outlined text-primary">info</span>
            <p class="text-slate-800 dark:text-slate-200 text-sm">
                After upload, the agreement will be sent for publisher approval.
            </p>
        </div>

        <button type="submit"
            class="w-full sm:w-auto bg-primary text-white h-12 px-5 rounded-lg 
                   font-bold hover:bg-primary/90 mt-4">
            Submit Agreement
        </button>

    </form>
</div>
</main>

<script>
document.getElementById("agreementFile").addEventListener("change", (e) => {
    document.getElementById("fileName").innerText =
        "ðŸ“„ " + (e.target.files[0]?.name || "");
});
</script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
if (new URLSearchParams(location.search).get("uploaded") === "true") {
    Swal.fire("Agreement Submitted!", "Your signed agreement has been uploaded successfully.", "success");
}
</script>