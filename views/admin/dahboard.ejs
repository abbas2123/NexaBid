<div class="px-4 md:px-6">

  <!-- PAGE TITLE -->
  <h1 class="text-2xl md:text-3xl font-bold mb-6">Admin Dashboard Overview</h1>

  <!-- ----------- PENDING TASKS -------------- -->
  <h2 class="text-xl font-semibold mb-3">Pending Tasks</h2>

  <div class="bg-white rounded-lg border p-4 overflow-x-auto">
    <table class="min-w-full text-left text-sm md:text-base">
      <thead>
        <tr class="text-gray-600 border-b">
          <th class="py-3">Task</th>
          <th class="py-3">Status</th>
          <th class="py-3 whitespace-nowrap">Due Date</th>
          <th class="py-3">Action</th>
        </tr>
      </thead>

      <tbody>
        <% tasks.forEach(t => { %>
        <tr class="border-b">
          <td class="py-3"><%= t.task %> â€” <%= t.name %></td>

          <td>
            <span class="px-3 py-1 rounded-lg bg-gray-200 text-gray-700 text-xs md:text-sm">
              <%= t.status %>
            </span>
          </td>

          <td class="whitespace-nowrap"><%= t.dueDate %></td>

          <td>
            <a href="<%= t.action %>"
              class="text-blue-600 font-medium text-sm md:text-base">Open</a>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>

  <!-- ----------- ANALYTICS -------------- -->
  <h2 class="text-xl font-semibold mt-8 mb-4">Analytics Overview</h2>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

    <!-- Users -->
    <div class="analytics-card bg-white rounded-lg border p-4 md:p-6">
      <p class="font-semibold text-sm md:text-base">New Users This Month</p>
      <p class="text-3xl md:text-4xl font-bold"><%= stats.recentUsers %></p>
      <p class="text-green-600 text-xs md:text-sm">vs. last month +20%</p>

      <canvas id="usersChart" class="w-full h-32 md:h-40 mt-4"></canvas>
    </div>

    <!-- Tenders -->
    <div class="analytics-card bg-white rounded-lg border p-4 md:p-6">
      <p class="font-semibold text-sm md:text-base">Tenders Processed</p>
      <p class="text-3xl md:text-4xl font-bold"><%= stats.activeTender %></p>
      <p class="text-green-600 text-xs md:text-sm">vs. last month +15%</p>

      <canvas id="tendersChart" class="w-full h-32 md:h-40 mt-4"></canvas>
    </div>

  </div>

  <!-- ----------- RECENT ACTIVITIES -------------- -->
  <h2 class="text-xl font-semibold mt-10 mb-4">Recent Activities</h2>

  <div class="bg-white rounded-lg border p-4 space-y-3">
    <% activities.forEach(a => { %>
    <div class="text-sm md:text-base">
      <p class="font-medium"><%= a.title %></p>
      <p class="text-gray-500"><%= a.message %></p>
    </div>
    <% }) %>
  </div>

</div>
<!-- Charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const weeklyUsers = <%- JSON.stringify(stats.weeklyUsers) %>;
const weeklyTenders = <%- JSON.stringify(stats.weeklyTenders) %>;

const ctx1 = document.getElementById("usersChart").getContext("2d");
new Chart(ctx1, {
    type: "bar",
    data: {
        labels: ["Week 1","Week 2","Week 3","Week 4"],
        datasets: [{
            label: "New Users",
            data: weeklyUsers,
            backgroundColor: "#60A5FA"
        }]
    }
});

const ctx2 = document.getElementById("tendersChart").getContext("2d");
new Chart(ctx2, {
    type: "line",
    data: {
        labels: ["Week 1","Week 2","Week 3","Week 4"],
        datasets: [{
            label: "Tenders",
            data: weeklyTenders,
            borderColor: "#2563EB",
            fill: false,
        }]
    }
});
</script>

